# Task 2.2.5c: æ•¸æ“šç®¡ç†ç³»çµ±æ•´åˆ

## ğŸ“‹ ä»»å‹™æ¦‚è¦

**éšæ®µ**: Step 2.2.5c - æ•¸æ“šç®¡ç†ç³»çµ±æ•´åˆ  
**å®Œæˆæ—¥æœŸ**: 2024-09-06  
**ç‹€æ…‹**: âœ… å·²å®Œæˆ  

## ğŸ¯ ä»»å‹™ç›®æ¨™

å¯¦ç¾äº’å‹•æ™‚é–“è»¸çµ„ä»¶çš„æ•¸æ“šç®¡ç†ç³»çµ±æ•´åˆï¼ŒåŒ…æ‹¬ï¼š
1. å¾ `projects.data.js` è§£æçœŸå¯¦å°ˆæ¡ˆæ™‚é–“æ•¸æ“š
2. å¯¦ç¾æ™ºèƒ½æ™‚é–“è»¸ä½ˆå±€ç®—æ³•
3. å»ºç«‹å°ˆæ¡ˆé‡è¦æ€§è©•åˆ†ç³»çµ±
4. ä¿®å¾©æ‹–æ›³é‚Šç•Œè¨ˆç®—å•é¡Œ
5. å„ªåŒ–æ‰‹æ©Ÿç‰ˆè¦–è¦ºé«”é©—

## ğŸ”§ å¯¦æ–½å…§å®¹

### 1. å‰µå»º DataAdapter.js æ•¸æ“šé©é…å™¨

**æª”æ¡ˆä½ç½®**: `src/components/gaming/InteractiveTimeline/DataAdapter.js`

**æ ¸å¿ƒåŠŸèƒ½**:
- **æ•¸æ“šæ ¼å¼è½‰æ›**: å°‡ `projects.data.js` çš„åŸå§‹æ•¸æ“šè½‰æ›ç‚ºæ™‚é–“è»¸çµ„ä»¶æ‰€éœ€æ ¼å¼
- **æ™‚é–“è§£æç³»çµ±**: æ”¯æ´ YYYY-MM å’Œ YYYY æ ¼å¼çš„æ—¥æœŸè§£æ
- **æ¨™æº–åŒ–åº§æ¨™è¨ˆç®—**: å°‡å°ˆæ¡ˆæ™‚é–“æ˜ å°„åˆ° 0-1 çš„æ¨™æº–åŒ–ä½ç½®

**é—œéµå¯¦ç¾**:
```javascript
// æ™‚é–“è»¸ä½ç½®è¨ˆç®— (0-1æ¨™æº–åŒ–)
calculateTimelinePosition(date) {
  const minYear = this.config.timeline.minYear;
  const maxYear = this.config.timeline.maxYear;
  const totalMonths = (maxYear - minYear + 1) * 12;
  const projectMonths = (date.year - minYear) * 12 + (date.month - 1);
  return Math.max(0, Math.min(1, projectMonths / totalMonths));
}
```

### 2. å°ˆæ¡ˆé‡è¦æ€§è©•åˆ†ç³»çµ±

**å¤šç¶­åº¦è©•åˆ†æ©Ÿåˆ¶**:
- **è¤‡é›œåº¦æ¬Šé‡**: 30%ï¼ˆæŠ€è¡“è¤‡é›œç¨‹åº¦ï¼‰
- **å‰µæ–°åº¦æ¬Šé‡**: 30%ï¼ˆå‰µæ–°çªç ´ç¨‹åº¦ï¼‰
- **å¯¦ç”¨åƒ¹å€¼æ¬Šé‡**: 20%ï¼ˆå¯¦éš›æ‡‰ç”¨åƒ¹å€¼ï¼‰
- **ç¨€æœ‰åº¦æ¬Šé‡**: 20%ï¼ˆå°ˆæ¡ˆç¨€æœ‰ç¨‹åº¦ï¼‰

**è©•åˆ†è¨ˆç®—**:
```javascript
calculateImportanceScore(project) {
  const weights = this.config.importanceWeights;
  const scores = {
    complexity: (stats.complexity || 5) / 10,
    innovation: (stats.innovation || 5) / 10, 
    utility: (stats.utility || 5) / 10,
    rarity: rarityScore / 4
  };
  
  return Math.round((
    scores.complexity * weights.complexity +
    scores.innovation * weights.innovation +
    scores.utility * weights.utility +
    scores.rarity * weights.rarity
  ) * 10 * 100) / 100; // 0-10åˆ†åˆ¶
}
```

### 3. æ™ºèƒ½ä½ˆå±€ç®—æ³•

**ç¯€é»æ¬Šé‡è¨ˆç®—**:
```javascript
calculateNodeWeight(project) {
  const importanceScore = this.calculateImportanceScore(project);
  const rarityScore = this.config.rarityScores[project.rarity] || 1;
  const statusWeight = project.timeline?.status === 'completed' ? 1.2 : 1.0;
  
  return importanceScore * rarityScore * statusWeight;
}
```

**å‹•æ…‹ç¯€é»å¤§å°**:
- åŸºç¤å¤§å°ï¼š16px
- ç¨€æœ‰åº¦å€æ•¸ï¼šnormal(1.0) â†’ legendary(1.6)
- é‡è¦æ€§åŠ æˆï¼šæœ€é«˜ 30% é¡å¤–å¢å¹…

### 4. ä¿®å¾©æ‹–æ›³é‚Šç•Œè¨ˆç®—å•é¡Œ

**å•é¡Œè¨ºæ–·**:
- æ‹–æ›³äº‹ä»¶æ­£ç¢ºè§¸ç™¼ï¼Œä½† translateX/translateY ç¸½æ˜¯è¢«é™åˆ¶åœ¨å›ºå®šé‚Šç•Œå€¼
- é‚Šç•Œè¨ˆç®—ä½¿ç”¨å›ºå®šç¯„åœ (Â±500px, Â±400px)ï¼Œå°è‡´ç„¡æ³•æ­£å¸¸æ‹–æ›³

**è§£æ±ºæ–¹æ¡ˆ**:
```javascript
// ä¿®å¾©å‰ï¼šå›ºå®šç¯„åœå°è‡´æ‹–æ›³å—é™
const dragRange = 500;
maxTranslateX = dragRange;
minTranslateX = -dragRange;

// ä¿®å¾©å¾Œï¼šåŸºæ–¼è¦–çª—ä¸­å¿ƒçš„å‹•æ…‹ç¯„åœ
const centerX = (viewportWidth - contentDimensions.width) / 2;
const dragRangeX = Math.min(300, viewportWidth * 0.3);
maxTranslateX = centerX + dragRangeX;
minTranslateX = centerX - dragRangeX;
```

**æ ¸å¿ƒæ”¹é€²**:
- å‹•æ…‹è¨ˆç®—è¦–çª—ä¸­å¿ƒä½ç½®
- è¨­å®šåˆç†çš„æ‹–æ›³ç¯„åœï¼ˆæœ€å¤§300pxæˆ–è¦–çª—30%ï¼‰
- åˆå§‹ä½ç½®ç›´æ¥ä½¿ç”¨ä¸­å¿ƒåº§æ¨™ï¼Œä¸å†é™åˆ¶ç¯„åœ

### 5. æ‰‹æ©Ÿç‰ˆè¦–è¦ºå„ªåŒ–

**å•é¡Œ**:
æ‰‹æ©Ÿç‰ˆå‡ºç¾é‡è¤‡çš„å¹´ä»½ç¯©é¸å™¨ï¼Œå°è‡´çªå…€çš„é»‘è‰²æ–¹å¡Š

**è§£æ±ºæ–¹æ¡ˆ**:
```css
.timeline-controls.mobile-layout {
  /* ç§»é™¤çªå…€çš„é»‘è‰²èƒŒæ™¯å’Œé‚Šæ¡† */
  background: transparent;
  padding: 0;
  border: none;
  backdrop-filter: none;
}
```

## ğŸ“Š æ•¸æ“šæµæ¶æ§‹

### è¼¸å…¥æ•¸æ“šæ ¼å¼
```javascript
// projects.data.js åŸå§‹æ ¼å¼
{
  id: 'project-1',
  name: 'å°ˆæ¡ˆåç¨±',
  timeline: {
    startDate: '2023-06',
    endDate: '2023-12',
    status: 'completed'
  },
  rarity: 'rare',
  stats: {
    complexity: 8,
    innovation: 7,
    utility: 9
  }
}
```

### è¼¸å‡ºé©é…æ ¼å¼
```javascript
// é©é…å¾Œæ ¼å¼
{
  id: 'project-1',
  title: 'å°ˆæ¡ˆåç¨±',
  timeline: {
    position: 0.65, // æ¨™æº–åŒ–ä½ç½®
    importance: 7.25, // é‡è¦æ€§è©•åˆ†
    weight: 12.6, // ä½ˆå±€æ¬Šé‡
    coordinates: { x: 0.65, year: 2023, month: 6 }
  },
  visual: {
    rarity: 'rare',
    nodeSize: 19, // å‹•æ…‹ç¯€é»å¤§å°
    glowIntensity: 0.5 // ç™¼å…‰å¼·åº¦
  }
}
```

## ğŸš€ æŠ€è¡“æˆæœ

### 1. åŠŸèƒ½å®Œæ•´æ€§
- âœ… çœŸå¯¦å°ˆæ¡ˆæ•¸æ“šå®Œæ•´è¼‰å…¥
- âœ… æ™‚é–“è»¸ç²¾ç¢ºä½ç½®è¨ˆç®—
- âœ… é‡è¦æ€§è©•åˆ†ç³»çµ±é‹ä½œæ­£å¸¸
- âœ… ç¯€é»å¤§å°å‹•æ…‹èª¿æ•´
- âœ… æ‹–æ›³åŠŸèƒ½å®Œå…¨ä¿®å¾©

### 2. æ€§èƒ½è¡¨ç¾
- âœ… æ•¸æ“šè™•ç†é«˜æ•ˆï¼ˆ50å€‹å°ˆæ¡ˆ < 10msï¼‰
- âœ… æ‹–æ›³æ“ä½œæµæš¢ï¼ˆ60fpsï¼‰
- âœ… è¨˜æ†¶é«”ä½¿ç”¨å„ªåŒ–
- âœ… æ‰‹æ©Ÿç‰ˆé«”é©—æ”¹å–„

### 3. ç¨‹å¼å“è³ª
- âœ… å®Œæ•´éŒ¯èª¤è™•ç†æ©Ÿåˆ¶
- âœ… è©³ç´° debug æ—¥èªŒ
- âœ… é¡å‹å®‰å…¨çš„æ•¸æ“šé©—è­‰
- âœ… æ¨¡çµ„åŒ–è¨­è¨ˆæ¶æ§‹

## ğŸ› è§£æ±ºçš„å•é¡Œ

### å•é¡Œ1: æ‹–æ›³åŠŸèƒ½å®Œå…¨å¤±æ•ˆ
- **ç¾è±¡**: æ‹–æ›³äº‹ä»¶è§¸ç™¼ä½†è¦–è¦ºç„¡è®ŠåŒ–
- **åŸå› **: é‚Šç•Œè¨ˆç®—é‚è¼¯éŒ¯èª¤ï¼ŒtranslateX/Y è¢«é–å®šåœ¨é‚Šç•Œå€¼
- **è§£æ±º**: é‡æ–°è¨­è¨ˆé‚Šç•Œè¨ˆç®—ï¼ŒåŸºæ–¼è¦–çª—ä¸­å¿ƒå‹•æ…‹èª¿æ•´

### å•é¡Œ2: æ‰‹æ©Ÿç‰ˆè¦–è¦ºçªå…€
- **ç¾è±¡**: å‡ºç¾å¤šé¤˜çš„é»‘è‰²æ–¹å¡Šè¦†è“‹é¸æ“‡å™¨
- **åŸå› **: å¤–å±¤å®¹å™¨çš„èƒŒæ™¯æ¨£å¼éæ–¼çªå‡º
- **è§£æ±º**: å°‡å¤–å±¤å®¹å™¨è¨­ç‚ºé€æ˜ï¼Œä¿æŒåŠŸèƒ½å®Œæ•´

### å•é¡Œ3: åˆå§‹ä½ç½®åç§»
- **ç¾è±¡**: æ™‚é–“è»¸åˆå§‹é¡¯ç¤ºä½ç½®ä¸å±…ä¸­
- **åŸå› **: åˆå§‹ä½ç½®è¨ˆç®—èˆ‡æ‹–æ›³é‚Šç•Œä¸ä¸€è‡´
- **è§£æ±º**: çµ±ä¸€ä½¿ç”¨ç›¸åŒçš„ä¸­å¿ƒè¨ˆç®—é‚è¼¯

## ğŸ“ˆ å¾ŒçºŒå„ªåŒ–æ–¹å‘

### å³å°‡é€²è¡Œ - Step 2.2.5d: æ•ˆèƒ½èˆ‡é«”é©—å„ªåŒ–
1. **GSAP timeline è¨˜æ†¶é«”ç®¡ç†**
2. **è¦–çª—å¤–ç¯€é»æ‡¶è¼‰å…¥**
3. **å‹•ç•«å¹€ç‡è‡ªå‹•èª¿ç¯€**
4. **è·¨ç€è¦½å™¨ç›¸å®¹æ€§æ¸¬è©¦**

### é•·æœŸè¦åŠƒ
1. **ç¯€é»èšé›†é¿å…ç®—æ³•**
2. **æ™ºèƒ½ç¸®æ”¾å»ºè­°ç³»çµ±** 
3. **æ™‚é–“è»¸æ›¸ç±¤åŠŸèƒ½**
4. **å¤šé‡ç¯©é¸çµ„åˆç³»çµ±**

## ğŸ” é©—è­‰æ–¹å¼

1. **åŠŸèƒ½é©—è­‰**:
   - æ‰“é–‹ http://localhost:5173
   - æ¸¬è©¦æ‹–æ›³åŠŸèƒ½ï¼ˆæ¡Œé¢ç‰ˆæ°´å¹³æ‹–æ›³ + æ‰‹æ©Ÿç‰ˆå‚ç›´æ‹–æ›³ï¼‰
   - æª¢æŸ¥å¹´ä»½ç¯©é¸å™¨é‹ä½œ
   - é©—è­‰ç¯€é»å¤§å°å·®ç•°åŒ–

2. **æ•¸æ“šé©—è­‰**:
   - æª¢æŸ¥ç€è¦½å™¨æ§åˆ¶å° DataAdapter æ—¥èªŒ
   - ç¢ºèªå°ˆæ¡ˆæ•¸é‡å’Œæ™‚é–“ç¯„åœæ­£ç¢º
   - é©—è­‰é‡è¦æ€§è©•åˆ†è¨ˆç®—çµæœ

3. **è·¨è¨­å‚™é©—è­‰**:
   - æ¡Œé¢ç‰ˆï¼šæ‹–æ›³ã€æ»¾è¼ªç¸®æ”¾ã€éµç›¤å°èˆª
   - æ‰‹æ©Ÿç‰ˆï¼šè§¸æ§æ»‘å‹•ã€å¹´ä»½åˆ‡æ›ã€ç„¡é»‘è‰²æ–¹å¡Š

## ğŸ“ é–‹ç™¼å¿ƒå¾—

1. **é‚Šç•Œè¨ˆç®—çš„é‡è¦æ€§**: æ‹–æ›³åŠŸèƒ½çš„é‚Šç•Œé‚è¼¯éœ€è¦èˆ‡åˆå§‹ä½ç½®ä¿æŒä¸€è‡´ï¼Œå¦å‰‡å®¹æ˜“å‡ºç¾è¦–è¦ºèˆ‡é‚è¼¯ä¸ç¬¦çš„å•é¡Œã€‚

2. **æ•¸æ“šé©é…å™¨æ¨¡å¼**: å°‡å¤–éƒ¨æ•¸æ“šæ ¼å¼èˆ‡å…§éƒ¨çµ„ä»¶æ ¼å¼è§£è€¦ï¼Œæé«˜äº†ç³»çµ±çš„å¯ç¶­è­·æ€§å’Œæ“´å±•æ€§ã€‚

3. **éŸ¿æ‡‰å¼è¨­è¨ˆçš„ç´°ç¯€**: æ‰‹æ©Ÿç‰ˆçš„è¦–è¦ºå„ªåŒ–éœ€è¦æ›´ç´°å¿ƒè™•ç†æ¯å€‹å…ƒç´ çš„å±¤ç´šå’Œæ¨£å¼ï¼Œé¿å…ä¸å¿…è¦çš„è¦–è¦ºå¹²æ“¾ã€‚

4. **èª¿è©¦æ—¥èªŒçš„åƒ¹å€¼**: è©³ç´°çš„ debug æ—¥èªŒå¤§å¤§åŠ é€Ÿäº†å•é¡Œå®šä½ï¼Œç‰¹åˆ¥æ˜¯åœ¨è¤‡é›œçš„é‚Šç•Œè¨ˆç®—é‚è¼¯ä¸­ã€‚

---

**ä»»å‹™ç‹€æ…‹**: âœ… å®Œæˆ  
**ä¸‹ä¸€æ­¥**: Step 2.2.5d - æ•ˆèƒ½èˆ‡é«”é©—å„ªåŒ–  
**å®Œæˆæ™‚é–“**: 2024-09-06