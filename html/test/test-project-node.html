<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ProjectNode çµ„ä»¶æ¸¬è©¦</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #0a0a0a, #1a1a2e);
            color: #ffffff;
            font-family: 'Inter', sans-serif;
            min-height: 100vh;
        }
        
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .test-title {
            text-align: center;
            margin-bottom: 40px;
            color: #d4af37;
        }
        
        .test-section {
            margin-bottom: 40px;
            padding: 20px;
            background: rgba(26, 26, 46, 0.8);
            border-radius: 10px;
            border: 1px solid rgba(212, 175, 55, 0.3);
        }
        
        .test-area {
            position: relative;
            height: 200px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            margin: 20px 0;
        }
        
        .test-controls {
            margin: 20px 0;
        }
        
        .test-controls button {
            margin: 5px 10px 5px 0;
            padding: 8px 16px;
            background: linear-gradient(135deg, #d4af37, #f4d03f);
            color: #000;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
        }
        
        .test-controls button:hover {
            background: linear-gradient(135deg, #f4d03f, #ffeb3b);
        }
        
        .log-area {
            height: 100px;
            overflow-y: auto;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 4px;
            padding: 10px;
            font-family: monospace;
            font-size: 12px;
            border: 1px solid rgba(212, 175, 55, 0.2);
        }
        
        /* å·¥å…·æç¤ºæ¨£å¼ */
        .node-tooltip {
            position: absolute !important;
            background: rgba(26, 26, 46, 0.95) !important;
            color: #ffffff !important;
            padding: 8px 12px !important;
            border-radius: 6px !important;
            font-size: 12px !important;
            line-height: 1.4 !important;
            white-space: nowrap !important;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3) !important;
            z-index: 1000 !important;
            pointer-events: none !important;
        }
        
        .tooltip-title {
            font-weight: bold;
            margin-bottom: 2px;
        }
        
        .tooltip-date {
            color: #d4af37;
            font-size: 11px;
        }
        
        .tooltip-category {
            color: #aaa;
            font-size: 10px;
            text-transform: uppercase;
        }
    </style>
    
    <!-- GSAP CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/Draggable.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/MotionPathPlugin.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
</head>
<body>
    <div class="test-container">
        <h1 class="test-title">ğŸ¯ ProjectNode çµ„ä»¶æ¸¬è©¦</h1>
        
        <div class="test-section">
            <h3>ğŸ“ åŸºæœ¬ç¯€é»æ¸²æŸ“æ¸¬è©¦</h3>
            <div class="test-area" id="basic-test"></div>
            <div class="test-controls">
                <button onclick="createBasicNode()">å‰µå»ºåŸºæœ¬ç¯€é»</button>
                <button onclick="clearArea('basic-test')">æ¸…é™¤</button>
            </div>
        </div>
        
        <div class="test-section">
            <h3>ğŸ¨ ä¸åŒé¡å‹ç¯€é»æ¸¬è©¦</h3>
            <div class="test-area" id="types-test"></div>
            <div class="test-controls">
                <button onclick="createMultipleNodes()">å‰µå»ºå¤šç¨®é¡å‹ç¯€é»</button>
                <button onclick="clearArea('types-test')">æ¸…é™¤</button>
            </div>
        </div>
        
        <div class="test-section">
            <h3>âš¡ äº’å‹•åŠŸèƒ½æ¸¬è©¦</h3>
            <div class="test-area" id="interaction-test"></div>
            <div class="test-controls">
                <button onclick="createInteractiveNode()">å‰µå»ºäº’å‹•ç¯€é»</button>
                <button onclick="toggleNodeState()">åˆ‡æ›ç¯€é»ç‹€æ…‹</button>
                <button onclick="clearArea('interaction-test')">æ¸…é™¤</button>
            </div>
        </div>
        
        <div class="test-section">
            <h3>ğŸ“± éŸ¿æ‡‰å¼æ¸¬è©¦</h3>
            <div class="test-area" id="responsive-test"></div>
            <div class="test-controls">
                <button onclick="createResponsiveNode()">å‰µå»ºéŸ¿æ‡‰å¼ç¯€é»</button>
                <button onclick="switchToMobile()">åˆ‡æ›åˆ°æ‰‹æ©Ÿæ¨¡å¼</button>
                <button onclick="switchToDesktop()">åˆ‡æ›åˆ°æ¡Œé¢æ¨¡å¼</button>
                <button onclick="clearArea('responsive-test')">æ¸…é™¤</button>
            </div>
        </div>
        
        <div class="test-section">
            <h3>ğŸ“ äº‹ä»¶æ—¥èªŒ</h3>
            <div class="log-area" id="log-area"></div>
            <div class="test-controls">
                <button onclick="clearLog()">æ¸…é™¤æ—¥èªŒ</button>
            </div>
        </div>
    </div>

    <script type="module">
        // å°å…¥çµ„ä»¶
        import { ProjectNode } from '../../src/components/gaming/InteractiveTimeline/ProjectNode.js';
        
        // å…¨åŸŸè®Šæ•¸
        window.ProjectNode = ProjectNode;
        window.testNodes = [];
        
        // æ¸¬è©¦æ•¸æ“š
        window.testProjects = [
            {
                id: 'test-backend',
                title: 'å¾®æœå‹™é›»å•†ç³»çµ±',
                date: '2023-08',
                category: 'backend',
                status: 'completed'
            },
            {
                id: 'test-frontend', 
                title: 'äº’å‹•æ™‚é–“è»¸ç³»çµ±',
                date: '2024-01',
                category: 'frontend',
                status: 'inProgress'
            },
            {
                id: 'test-fullstack',
                title: 'é…ç½®é©…å‹•CMS',
                date: '2024-03', 
                category: 'fullstack',
                status: 'completed'
            },
            {
                id: 'test-architecture',
                title: 'åˆ†æ•£å¼ç³»çµ±æ¶æ§‹',
                date: '2024-05',
                category: 'architecture', 
                status: 'planned'
            },
            {
                id: 'test-opensource',
                title: 'é–‹æºå·¥å…·åº«',
                date: '2024-07',
                category: 'opensource',
                status: 'inProgress'
            }
        ];
        
        // æ—¥èªŒå‡½æ•¸
        window.log = function(message) {
            const logArea = document.getElementById('log-area');
            const timestamp = new Date().toLocaleTimeString();
            logArea.innerHTML += `<div>[${timestamp}] ${message}</div>`;
            logArea.scrollTop = logArea.scrollHeight;
        };
        
        console.log('ğŸš€ ProjectNode æ¸¬è©¦é é¢å·²è¼‰å…¥');
        log('ProjectNode æ¸¬è©¦é é¢å·²è¼‰å…¥');
    </script>

    <script>
        // æ¸¬è©¦å‡½æ•¸
        function createBasicNode() {
            const container = document.getElementById('basic-test');
            const project = testProjects[0];
            
            const node = new ProjectNode({
                nodeSize: 20,
                animations: { enabled: true }
            });
            
            const callbacks = {
                onNodeClick: (element, project, index, event) => {
                    log(`ç¯€é»è¢«é»æ“Š: ${project.title}`);
                },
                onNodeHover: (project, index, action, event) => {
                    log(`ç¯€é»æ‡¸åœ${action}: ${project.title}`);
                }
            };
            
            const element = node.initialize(project, 0, callbacks);
            node.updatePosition({ x: 100, y: 75 });
            
            container.appendChild(element);
            testNodes.push(node);
            
            log(`å‰µå»ºåŸºæœ¬ç¯€é»: ${project.title}`);
        }
        
        function createMultipleNodes() {
            const container = document.getElementById('types-test');
            
            testProjects.forEach((project, index) => {
                const node = new ProjectNode({
                    nodeSize: 16,
                    animations: { enabled: true, hoverScale: 1.4 }
                });
                
                const callbacks = {
                    onNodeClick: (element, project, index, event) => {
                        log(`${project.category} ç¯€é»è¢«é»æ“Š: ${project.title}`);
                    },
                    onNodeHover: (project, index, action) => {
                        if (action === 'enter') {
                            log(`æ‡¸åœ ${project.category} ç¯€é»: ${project.title}`);
                        }
                    }
                };
                
                const element = node.initialize(project, index, callbacks);
                node.updatePosition({ 
                    x: 50 + index * 60, 
                    y: 75 
                });
                
                container.appendChild(element);
                testNodes.push(node);
            });
            
            log(`å‰µå»º ${testProjects.length} å€‹ä¸åŒé¡å‹ç¯€é»`);
        }
        
        let interactiveNode = null;
        
        function createInteractiveNode() {
            const container = document.getElementById('interaction-test');
            const project = testProjects[1];
            
            interactiveNode = new ProjectNode({
                nodeSize: 24,
                animations: { 
                    enabled: true, 
                    hoverScale: 1.5,
                    clickScale: 1.8
                },
                interaction: {
                    enabled: true,
                    keyboard: true,
                    tooltip: true,
                    clickFeedback: true
                }
            });
            
            const callbacks = {
                onNodeClick: (element, project, index, event) => {
                    log(`ğŸ¯ äº’å‹•ç¯€é»è¢«é»æ“Š: ${project.title} (ä½ç½®: ${event.clientX}, ${event.clientY})`);
                },
                onNodeHover: (project, index, action, event) => {
                    log(`âœ¨ äº’å‹•ç¯€é»æ‡¸åœ${action}: ${project.title}`);
                }
            };
            
            const element = interactiveNode.initialize(project, 1, callbacks);
            interactiveNode.updatePosition({ x: 150, y: 75 });
            
            container.appendChild(element);
            testNodes.push(interactiveNode);
            
            log(`å‰µå»ºäº’å‹•ç¯€é»: ${project.title} (æ”¯æ´éµç›¤å°èˆª)`);
        }
        
        function toggleNodeState() {
            if (!interactiveNode) {
                log('âš ï¸ è«‹å…ˆå‰µå»ºäº’å‹•ç¯€é»');
                return;
            }
            
            const currentState = interactiveNode.getNodeState();
            const newActiveState = !currentState.isActive;
            
            interactiveNode.setNodeState({ isActive: newActiveState });
            
            log(`ğŸ”„ ç¯€é»ç‹€æ…‹åˆ‡æ›: ${newActiveState ? 'æ¿€æ´»' : 'å–æ¶ˆæ¿€æ´»'}`);
        }
        
        let responsiveNode = null;
        
        function createResponsiveNode() {
            const container = document.getElementById('responsive-test');
            const project = testProjects[2];
            
            responsiveNode = new ProjectNode({
                responsive: {
                    mobile: { nodeSize: 14, hoverScale: 1.2 },
                    tablet: { nodeSize: 18, hoverScale: 1.3 },
                    desktop: { nodeSize: 22, hoverScale: 1.4 }
                },
                animations: { enabled: true }
            });
            
            const callbacks = {
                onNodeClick: (element, project, index, event) => {
                    const state = responsiveNode.getNodeState();
                    log(`ğŸ“± éŸ¿æ‡‰å¼ç¯€é»è¢«é»æ“Š: ${project.title} (æ–·é»: ${responsiveNode.state.currentBreakpoint})`);
                },
                onNodeHover: (project, index, action) => {
                    if (action === 'enter') {
                        log(`ğŸ“± éŸ¿æ‡‰å¼ç¯€é»æ‡¸åœ: æ–·é» ${responsiveNode.state.currentBreakpoint}`);
                    }
                }
            };
            
            const element = responsiveNode.initialize(project, 2, callbacks);
            responsiveNode.updatePosition({ x: 100, y: 75 });
            
            container.appendChild(element);
            testNodes.push(responsiveNode);
            
            log(`å‰µå»ºéŸ¿æ‡‰å¼ç¯€é»: ${project.title}`);
        }
        
        function switchToMobile() {
            if (!responsiveNode) {
                log('âš ï¸ è«‹å…ˆå‰µå»ºéŸ¿æ‡‰å¼ç¯€é»');
                return;
            }
            
            responsiveNode.updateBreakpoint('mobile');
            log('ğŸ“± åˆ‡æ›åˆ°æ‰‹æ©Ÿæ¨¡å¼ (14px, 1.2x hover)');
        }
        
        function switchToDesktop() {
            if (!responsiveNode) {
                log('âš ï¸ è«‹å…ˆå‰µå»ºéŸ¿æ‡‰å¼ç¯€é»');
                return;
            }
            
            responsiveNode.updateBreakpoint('desktop');
            log('ğŸ–¥ï¸ åˆ‡æ›åˆ°æ¡Œé¢æ¨¡å¼ (22px, 1.4x hover)');
        }
        
        function clearArea(areaId) {
            const area = document.getElementById(areaId);
            area.innerHTML = '';
            
            // æ¸…ç†å°æ‡‰çš„æ¸¬è©¦ç¯€é»
            testNodes.forEach(node => {
                if (area.contains(node.element)) {
                    node.destroy();
                }
            });
            
            testNodes = testNodes.filter(node => node.element && node.element.parentNode);
            
            if (areaId === 'interaction-test') {
                interactiveNode = null;
            }
            if (areaId === 'responsive-test') {
                responsiveNode = null;
            }
            
            log(`æ¸…é™¤æ¸¬è©¦å€åŸŸ: ${areaId}`);
        }
        
        function clearLog() {
            document.getElementById('log-area').innerHTML = '';
        }
        
        // é é¢å¸è¼‰æ™‚æ¸…ç†è³‡æº
        window.addEventListener('beforeunload', () => {
            testNodes.forEach(node => node.destroy());
        });
    </script>
</body>
</html>