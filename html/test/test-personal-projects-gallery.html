<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Step 2.3.3 - å€‹äººå°ˆæ¡ˆå¡ç‰Œå±•ç¤ºæ¸¬è©¦</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #16213e 100%);
            color: #ffffff;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }

        .test-container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .test-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .test-header h1 {
            font-size: 2.5em;
            background: linear-gradient(45deg, #d4af37, #f4d03f);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
            text-shadow: 0 0 30px rgba(212, 175, 55, 0.5);
        }

        .test-header p {
            font-size: 1.2em;
            color: #a0a0a0;
            margin-bottom: 20px;
        }

        .test-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            text-transform: uppercase;
        }

        .btn-primary {
            background: linear-gradient(135deg, #4a90e2, #357abd);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(74, 144, 226, 0.4);
        }

        .btn-legendary {
            background: linear-gradient(135deg, #d4af37, #f4d03f);
            color: #1a1a2e;
            position: relative;
            overflow: hidden;
        }

        .btn-legendary::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transform: rotate(45deg);
            transition: all 0.5s;
            opacity: 0;
        }

        .btn-legendary:hover::before {
            animation: shimmer 0.5s ease;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); opacity: 0; }
            50% { opacity: 1; }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); opacity: 0; }
        }

        .gallery-container {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 16px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            overflow: hidden;
        }

        .test-instructions {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            text-align: left;
        }

        .test-instructions h3 {
            color: #4a90e2;
            margin-top: 0;
        }

        .test-instructions ul {
            margin: 10px 0;
            padding-left: 20px;
        }

        .test-instructions li {
            margin: 8px 0;
            line-height: 1.6;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .feature-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .feature-card h4 {
            color: #d4af37;
            margin-top: 0;
            margin-bottom: 10px;
        }

        .feature-list {
            list-style: none;
            padding: 0;
        }

        .feature-list li {
            padding: 5px 0;
            color: #e0e0e0;
        }

        .feature-list li::before {
            content: 'âœ¨';
            margin-right: 8px;
        }

        .status-indicator {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: bold;
            margin-left: 10px;
        }

        .status-loading {
            background: #ffd93d;
            color: #1a1a2e;
        }

        .status-ready {
            background: #4ecdc4;
            color: #1a1a2e;
        }

        .status-error {
            background: #ff6b6b;
            color: white;
        }

        /* éŸ¿æ‡‰å¼è¨­è¨ˆ */
        @media (max-width: 768px) {
            .test-header h1 {
                font-size: 2em;
            }
            
            .test-controls {
                flex-direction: column;
                align-items: center;
            }
            
            .btn {
                width: 200px;
                text-align: center;
            }
        }
    </style>
    
    <!-- GSAP CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <!-- Three.js CDN (éœ€è¦ç”¨æ–¼ç²’å­ç³»çµ±) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
</head>
<body>
    <div class="test-container">
        <div class="test-header">
            <h1>ğŸ´ å€‹äººå°ˆæ¡ˆå¡ç‰Œå±•ç¤º</h1>
            <p>éŠæˆ²ç‹é¢¨æ ¼çš„å€‹äººå°ˆæ¡ˆæ”¶è—å±•ç¤ºç³»çµ±</p>
            <span id="systemStatus" class="status-indicator status-loading">ç³»çµ±è¼‰å…¥ä¸­</span>
        </div>

        <div class="test-controls">
            <button class="btn btn-primary" onclick="initializeGallery()">
                ğŸš€ åˆå§‹åŒ–å±•ç¤ºç³»çµ±
            </button>
            <button class="btn btn-legendary" onclick="filterLegendary()">
                â­ åªé¡¯ç¤ºå‚³èªªç´š
            </button>
            <button class="btn btn-primary" onclick="testSummoning()">
                ğŸ® æ¸¬è©¦å¬å–šå‹•ç•«
            </button>
            <button class="btn btn-primary" onclick="resetFilters()">
                ğŸ”„ é‡ç½®ç¯©é¸
            </button>
        </div>

        <div class="feature-grid">
            <div class="feature-card">
                <h4>ğŸ¨ å¡ç‰Œç‰¹è‰²</h4>
                <ul class="feature-list">
                    <li>éŠæˆ²ç‹é¢¨æ ¼è¨­è¨ˆ</li>
                    <li>ç¨€æœ‰åº¦è¦–è¦ºå·®ç•°</li>
                    <li>3D æ‡¸åœæ•ˆæœ</li>
                    <li>ç²’å­ç‰¹æ•ˆç³»çµ±</li>
                    <li>éŸ¿æ‡‰å¼å¡ç‰Œæ’åˆ—</li>
                </ul>
            </div>

            <div class="feature-card">
                <h4>ğŸ” ç¯©é¸ç³»çµ±</h4>
                <ul class="feature-list">
                    <li>æŠ€è¡“é¡å‹ç¯©é¸</li>
                    <li>ç¨€æœ‰åº¦åˆ†ç´š</li>
                    <li>å°ˆæ¡ˆç‹€æ…‹éæ¿¾</li>
                    <li>å¤šç¶­åº¦æ’åº</li>
                    <li>å³æ™‚æœç´¢çµæœ</li>
                </ul>
            </div>

            <div class="feature-card">
                <h4>âš¡ å¬å–šç³»çµ±</h4>
                <ul class="feature-list">
                    <li>é»æ“Šè§¸ç™¼å¬å–š</li>
                    <li>8ç§’å®Œæ•´å‹•ç•«</li>
                    <li>è¨­å‚™æ€§èƒ½å„ªåŒ–</li>
                    <li>ESC å¿«é€Ÿè·³é</li>
                    <li>ç„¡ç¸«è©³æƒ…è½‰å ´</li>
                </ul>
            </div>

            <div class="feature-card">
                <h4>ğŸ“± éŸ¿æ‡‰å¼è¨­è¨ˆ</h4>
                <ul class="feature-list">
                    <li>æ¡Œé¢ç«¯å¤šåˆ—é¡¯ç¤º</li>
                    <li>ç§»å‹•ç«¯é©é…å¸ƒå±€</li>
                    <li>è§¸æ§æ‰‹å‹¢æ”¯æ´</li>
                    <li>éµç›¤å°èˆªæ”¯æ´</li>
                    <li>ç„¡éšœç¤™è¨­è¨ˆ</li>
                </ul>
            </div>
        </div>

        <div class="test-instructions">
            <h3>ğŸ§ª æ¸¬è©¦èªªæ˜</h3>
            <ul>
                <li><strong>åˆå§‹åŒ–å±•ç¤ºç³»çµ±:</strong> è¼‰å…¥å€‹äººå°ˆæ¡ˆå¡ç‰Œç•«å»Š</li>
                <li><strong>å¡ç‰Œäº’å‹•:</strong> æ‡¸åœæŸ¥çœ‹ 3D æ•ˆæœï¼Œé»æ“Šè§¸ç™¼å¬å–šæˆ–è©³æƒ…</li>
                <li><strong>ç¯©é¸åŠŸèƒ½:</strong> ä½¿ç”¨é ‚éƒ¨æ§åˆ¶æ¢ç¯©é¸ä¸åŒé¡å‹å’Œç¨€æœ‰åº¦</li>
                <li><strong>å¬å–šå‹•ç•«:</strong> å‚³èªªç´šå’Œè¶…ç¨€æœ‰å°ˆæ¡ˆæ”¯æ´å¬å–šç‰¹æ•ˆ</li>
                <li><strong>è©³æƒ…æ¨¡æ…‹æ¡†:</strong> æŸ¥çœ‹å°ˆæ¡ˆå®Œæ•´è³‡è¨Šã€æŠ€è¡“æ£§å’Œé€£çµ</li>
            </ul>
            
            <h3>âŒ¨ï¸ éµç›¤å¿«æ·éµ</h3>
            <ul>
                <li><strong>Tab:</strong> åˆ‡æ›ç„¦é»åˆ°å¡ç‰Œ</li>
                <li><strong>Enter/Space:</strong> è§¸ç™¼å¡ç‰Œå¬å–š</li>
                <li><strong>ESC:</strong> è·³éå¬å–šå‹•ç•«æˆ–é—œé–‰æ¨¡æ…‹æ¡†</li>
                <li><strong>æ–¹å‘éµ:</strong> å°èˆªå¡ç‰Œï¼ˆè¨ˆåŠƒä¸­ï¼‰</li>
            </ul>

            <h3>âœ… é æœŸæ•ˆæœ</h3>
            <ul>
                <li>å¡ç‰Œä»¥ç¶²æ ¼å½¢å¼æ•´é½Šæ’åˆ—</li>
                <li>ä¸åŒç¨€æœ‰åº¦å¡ç‰Œæœ‰å°æ‡‰çš„é‚Šæ¡†å’Œç‰¹æ•ˆ</li>
                <li>æ‡¸åœæ™‚å¡ç‰Œ 3D å‚¾æ–œå’Œç™¼å…‰</li>
                <li>é»æ“Šå‚³èªªç´šå¡ç‰Œè§¸ç™¼å¬å–šå‹•ç•«</li>
                <li>å¬å–šå®Œæˆå¾Œé¡¯ç¤ºå°ˆæ¡ˆè©³æƒ…æ¨¡æ…‹æ¡†</li>
                <li>ç¯©é¸å’Œæ’åºåŠŸèƒ½æ­£å¸¸å·¥ä½œ</li>
            </ul>
        </div>

        <!-- å±•ç¤ºç³»çµ±å®¹å™¨ -->
        <div class="gallery-container">
            <div id="personalProjectsGallery">
                <!-- å€‹äººå°ˆæ¡ˆå¡ç‰Œç•«å»Šå°‡åœ¨æ­¤æ¸²æŸ“ -->
            </div>
        </div>
    </div>

    <script type="module">
        import { PersonalProjectsGallery } from '../../src/components/gaming/PersonalProjects/PersonalProjectsGallery.js';

        window.PersonalProjectsGallery = PersonalProjectsGallery;
        window.galleryInstance = null;

        // æ›´æ–°ç‹€æ…‹æŒ‡ç¤ºå™¨
        function updateStatus(status, text) {
            const indicator = document.getElementById('systemStatus');
            indicator.className = `status-indicator status-${status}`;
            indicator.textContent = text;
        }

        // åˆå§‹åŒ–å±•ç¤ºç³»çµ±
        window.initializeGallery = async function() {
            try {
                updateStatus('loading', 'æ­£åœ¨åˆå§‹åŒ–...');
                
                const container = document.getElementById('personalProjectsGallery');
                
                // æ¸…ç†èˆŠå¯¦ä¾‹
                if (window.galleryInstance) {
                    window.galleryInstance.destroy();
                    window.galleryInstance = null;
                }
                
                container.innerHTML = '';
                
                console.log('ğŸ´ é–‹å§‹å‰µå»ºå€‹äººå°ˆæ¡ˆå¡ç‰Œç•«å»Š');
                
                // å‰µå»ºæ–°çš„ç•«å»Šå¯¦ä¾‹
                window.galleryInstance = new PersonalProjectsGallery({
                    container: container,
                    layout: {
                        columns: {
                            desktop: 4,
                            tablet: 3,
                            mobile: 2
                        },
                        gap: '20px'
                    },
                    summoning: {
                        enabled: true,
                        legendaryOnly: false  // å…è¨±æ‰€æœ‰ç¨€æœ‰å¡ç‰Œå¬å–š
                    },
                    filters: {
                        enabled: true
                    }
                });
                
                // åˆå§‹åŒ–ç•«å»Š
                await window.galleryInstance.init();
                
                updateStatus('ready', 'ç³»çµ±å°±ç·’');
                console.log('âœ… å€‹äººå°ˆæ¡ˆå¡ç‰Œç•«å»Šåˆå§‹åŒ–å®Œæˆ');
                
                // é¡¯ç¤ºæˆåŠŸæç¤º
                showNotification('ğŸ‰ å€‹äººå°ˆæ¡ˆå¡ç‰Œç•«å»Šå·²æº–å‚™å°±ç·’ï¼', 'success');
                
            } catch (error) {
                console.error('âŒ ç•«å»Šåˆå§‹åŒ–å¤±æ•—:', error);
                updateStatus('error', 'åˆå§‹åŒ–å¤±æ•—');
                showNotification(`âŒ åˆå§‹åŒ–å¤±æ•—: ${error.message}`, 'error');
            }
        };

        // ç¯©é¸å‚³èªªç´šå°ˆæ¡ˆ
        window.filterLegendary = function() {
            if (!window.galleryInstance) {
                showNotification('âš ï¸ è«‹å…ˆåˆå§‹åŒ–å±•ç¤ºç³»çµ±', 'warning');
                return;
            }
            
            // è¨­ç½®ç¨€æœ‰åº¦ç¯©é¸
            const raritySelect = document.querySelector('[data-filter="rarity"]');
            if (raritySelect) {
                raritySelect.value = 'legendary';
                raritySelect.dispatchEvent(new Event('change'));
                showNotification('â­ å·²ç¯©é¸å‚³èªªç´šå°ˆæ¡ˆ', 'info');
            }
        };

        // æ¸¬è©¦å¬å–šå‹•ç•«
        window.testSummoning = async function() {
            if (!window.galleryInstance) {
                showNotification('âš ï¸ è«‹å…ˆåˆå§‹åŒ–å±•ç¤ºç³»çµ±', 'warning');
                return;
            }
            
            // å°‹æ‰¾ç¬¬ä¸€å€‹å‚³èªªç´šå°ˆæ¡ˆå¡ç‰Œ
            const legendaryCard = document.querySelector('.project-card[data-rarity="legendary"]');
            if (legendaryCard) {
                console.log('ğŸ® æ¸¬è©¦å¬å–šå‹•ç•«');
                showNotification('ğŸ® æ­£åœ¨æ¸¬è©¦å¬å–šå‹•ç•«...', 'info');
                legendaryCard.click();
            } else {
                showNotification('âš ï¸ æ‰¾ä¸åˆ°å‚³èªªç´šå°ˆæ¡ˆå¡ç‰Œ', 'warning');
            }
        };

        // é‡ç½®ç¯©é¸
        window.resetFilters = function() {
            if (!window.galleryInstance) {
                showNotification('âš ï¸ è«‹å…ˆåˆå§‹åŒ–å±•ç¤ºç³»çµ±', 'warning');
                return;
            }
            
            window.galleryInstance.resetFilters();
            showNotification('ğŸ”„ ç¯©é¸æ¢ä»¶å·²é‡ç½®', 'info');
        };

        // é€šçŸ¥ç³»çµ±
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            notification.textContent = message;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${getNotificationColor(type)};
                color: white;
                padding: 12px 20px;
                border-radius: 8px;
                font-size: 14px;
                font-weight: 500;
                z-index: 20000;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
                animation: slideIn 0.3s ease;
            `;
            
            document.body.appendChild(notification);
            
            // 3ç§’å¾Œè‡ªå‹•ç§»é™¤
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease forwards';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }

        function getNotificationColor(type) {
            const colors = {
                success: '#4ecdc4',
                error: '#ff6b6b',
                warning: '#ffd93d',
                info: '#4a90e2'
            };
            return colors[type] || colors.info;
        }

        // æ·»åŠ å‹•ç•« CSS
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);

        // é é¢è¼‰å…¥å®Œæˆå¾Œæ›´æ–°ç‹€æ…‹
        document.addEventListener('DOMContentLoaded', () => {
            updateStatus('ready', 'ç­‰å¾…åˆå§‹åŒ–');
            console.log('ğŸ´ å€‹äººå°ˆæ¡ˆå¡ç‰Œå±•ç¤ºæ¸¬è©¦é é¢å·²å°±ç·’');
            
            // é¡¯ç¤ºæ­¡è¿è¨Šæ¯
            setTimeout(() => {
                showNotification('ğŸ´ æ­¡è¿ä½¿ç”¨å€‹äººå°ˆæ¡ˆå¡ç‰Œå±•ç¤ºç³»çµ±ï¼', 'info');
            }, 500);
        });

        // éŒ¯èª¤è™•ç†
        window.addEventListener('error', (e) => {
            console.error('âŒ é é¢éŒ¯èª¤:', e.error);
            updateStatus('error', 'ç³»çµ±éŒ¯èª¤');
            showNotification(`âŒ ç³»çµ±éŒ¯èª¤: ${e.error.message}`, 'error');
        });
    </script>
</body>
</html>