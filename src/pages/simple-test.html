<!doctype html>
<html lang="zh-TW">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ç°¡å–®æ¸¬è©¦é é¢</title>

    <style>
      /* åŸºæœ¬æ¨£å¼ */
      :root {
        --bg-dark: #0a0a0a;
        --text-light: #ffffff;
        --accent-gold: #d4af37;
        --space-4: 1rem;
      }

      body {
        margin: 0;
        padding: var(--space-4);
        background: var(--bg-dark);
        color: var(--text-light);
        font-family: Arial, sans-serif;
        min-height: 100vh;
      }

      .container {
        max-width: 800px;
        margin: 0 auto;
      }

      .btn {
        background: var(--accent-gold);
        color: var(--bg-dark);
        border: none;
        padding: 0.5rem 1rem;
        border-radius: 4px;
        cursor: pointer;
        margin: 0.5rem;
      }

      .btn:hover {
        opacity: 0.8;
      }

      .log {
        background: #1a1a1a;
        padding: 1rem;
        border-radius: 4px;
        margin-top: 1rem;
        font-family: monospace;
        max-height: 300px;
        overflow-y: auto;
      }

      .error {
        color: #ff6b6b;
      }
      .success {
        color: #51cf66;
      }
      .info {
        color: #74c0fc;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>ğŸ§ª ç°¡å–®æ¸¬è©¦é é¢</h1>
      <p>ç”¨æ–¼è¨ºæ–· SkillTree çµ„ä»¶è¼‰å…¥å•é¡Œ</p>

      <button id="testBtn" class="btn">æ¸¬è©¦çµ„ä»¶è¼‰å…¥</button>
      <button id="clearBtn" class="btn">æ¸…ç©ºæ—¥èªŒ</button>

      <div id="log" class="log">
        <div class="info">[ç³»çµ±] æ¸¬è©¦é é¢æº–å‚™å°±ç·’</div>
      </div>
    </div>

    <script>
      const log = document.getElementById('log');
      const testBtn = document.getElementById('testBtn');
      const clearBtn = document.getElementById('clearBtn');

      function addLog(message, type = 'info') {
        const time = new Date().toLocaleTimeString();
        const div = document.createElement('div');
        div.className = type;
        div.textContent = `[${time}] ${message}`;
        log.appendChild(div);
        log.scrollTop = log.scrollHeight;
        console.log(`[Test] ${message}`);
      }

      async function testComponentLoad() {
        try {
          addLog('é–‹å§‹æ¸¬è©¦çµ„ä»¶è¼‰å…¥...', 'info');

          // æ¸¬è©¦ 1: è¼‰å…¥ SkillTree index
          addLog('æ¸¬è©¦ 1: è¼‰å…¥ SkillTree index.ts', 'info');
          const skillTreeModule = await import(
            '../components/gaming/SkillTree/index.ts'
          );
          addLog(
            `æˆåŠŸï¼åŒ¯å‡ºé …ç›®: ${Object.keys(skillTreeModule).join(', ')}`,
            'success'
          );

          // æ¸¬è©¦ 2: æª¢æŸ¥é¡åˆ¥
          const { SkillTree, HexCoordSystem } = skillTreeModule;
          addLog('æ¸¬è©¦ 2: æª¢æŸ¥é¡åˆ¥å»ºæ§‹å‡½æ•¸', 'info');

          if (typeof SkillTree === 'function') {
            addLog('SkillTree é¡åˆ¥å¯ç”¨', 'success');
          } else {
            addLog(`SkillTree é¡å‹éŒ¯èª¤: ${typeof SkillTree}`, 'error');
          }

          if (typeof HexCoordSystem === 'function') {
            addLog('HexCoordSystem é¡åˆ¥å¯ç”¨', 'success');
          } else {
            addLog(
              `HexCoordSystem é¡å‹éŒ¯èª¤: ${typeof HexCoordSystem}`,
              'error'
            );
          }

          // æ¸¬è©¦ 3: å»ºç«‹å¯¦ä¾‹
          addLog('æ¸¬è©¦ 3: å»ºç«‹ HexCoordSystem å¯¦ä¾‹', 'info');
          const hexSystem = new HexCoordSystem(30);
          addLog('HexCoordSystem å¯¦ä¾‹å»ºç«‹æˆåŠŸ', 'success');

          // æ¸¬è©¦ 4: åŸºæœ¬åŠŸèƒ½
          addLog('æ¸¬è©¦ 4: æ¸¬è©¦åº§æ¨™è½‰æ›', 'info');
          const pixel = hexSystem.hexToPixel({ q: 1, r: 0 });
          addLog(
            `åº§æ¨™è½‰æ›çµæœ: x=${pixel.x.toFixed(2)}, y=${pixel.y.toFixed(2)}`,
            'success'
          );

          addLog('æ‰€æœ‰æ¸¬è©¦å®Œæˆï¼', 'success');
        } catch (error) {
          addLog(`æ¸¬è©¦å¤±æ•—: ${error.message}`, 'error');
          console.error('Test failed:', error);
        }
      }

      function clearLog() {
        log.innerHTML = '<div class="info">[ç³»çµ±] æ—¥èªŒå·²æ¸…ç©º</div>';
      }

      testBtn.addEventListener('click', testComponentLoad);
      clearBtn.addEventListener('click', clearLog);

      addLog('ç°¡å–®æ¸¬è©¦é é¢è¼‰å…¥å®Œæˆ', 'success');
    </script>
  </body>
</html>
