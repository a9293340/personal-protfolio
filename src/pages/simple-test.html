<!doctype html>
<html lang="zh-TW">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>簡單測試頁面</title>

    <style>
      /* 基本樣式 */
      :root {
        --bg-dark: #0a0a0a;
        --text-light: #ffffff;
        --accent-gold: #d4af37;
        --space-4: 1rem;
      }

      body {
        margin: 0;
        padding: var(--space-4);
        background: var(--bg-dark);
        color: var(--text-light);
        font-family: Arial, sans-serif;
        min-height: 100vh;
      }

      .container {
        max-width: 800px;
        margin: 0 auto;
      }

      .btn {
        background: var(--accent-gold);
        color: var(--bg-dark);
        border: none;
        padding: 0.5rem 1rem;
        border-radius: 4px;
        cursor: pointer;
        margin: 0.5rem;
      }

      .btn:hover {
        opacity: 0.8;
      }

      .log {
        background: #1a1a1a;
        padding: 1rem;
        border-radius: 4px;
        margin-top: 1rem;
        font-family: monospace;
        max-height: 300px;
        overflow-y: auto;
      }

      .error {
        color: #ff6b6b;
      }
      .success {
        color: #51cf66;
      }
      .info {
        color: #74c0fc;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>🧪 簡單測試頁面</h1>
      <p>用於診斷 SkillTree 組件載入問題</p>

      <button id="testBtn" class="btn">測試組件載入</button>
      <button id="clearBtn" class="btn">清空日誌</button>

      <div id="log" class="log">
        <div class="info">[系統] 測試頁面準備就緒</div>
      </div>
    </div>

    <script>
      const log = document.getElementById('log');
      const testBtn = document.getElementById('testBtn');
      const clearBtn = document.getElementById('clearBtn');

      function addLog(message, type = 'info') {
        const time = new Date().toLocaleTimeString();
        const div = document.createElement('div');
        div.className = type;
        div.textContent = `[${time}] ${message}`;
        log.appendChild(div);
        log.scrollTop = log.scrollHeight;
        console.log(`[Test] ${message}`);
      }

      async function testComponentLoad() {
        try {
          addLog('開始測試組件載入...', 'info');

          // 測試 1: 載入 SkillTree index
          addLog('測試 1: 載入 SkillTree index.ts', 'info');
          const skillTreeModule = await import(
            '../components/gaming/SkillTree/index.ts'
          );
          addLog(
            `成功！匯出項目: ${Object.keys(skillTreeModule).join(', ')}`,
            'success'
          );

          // 測試 2: 檢查類別
          const { SkillTree, HexCoordSystem } = skillTreeModule;
          addLog('測試 2: 檢查類別建構函數', 'info');

          if (typeof SkillTree === 'function') {
            addLog('SkillTree 類別可用', 'success');
          } else {
            addLog(`SkillTree 類型錯誤: ${typeof SkillTree}`, 'error');
          }

          if (typeof HexCoordSystem === 'function') {
            addLog('HexCoordSystem 類別可用', 'success');
          } else {
            addLog(
              `HexCoordSystem 類型錯誤: ${typeof HexCoordSystem}`,
              'error'
            );
          }

          // 測試 3: 建立實例
          addLog('測試 3: 建立 HexCoordSystem 實例', 'info');
          const hexSystem = new HexCoordSystem(30);
          addLog('HexCoordSystem 實例建立成功', 'success');

          // 測試 4: 基本功能
          addLog('測試 4: 測試座標轉換', 'info');
          const pixel = hexSystem.hexToPixel({ q: 1, r: 0 });
          addLog(
            `座標轉換結果: x=${pixel.x.toFixed(2)}, y=${pixel.y.toFixed(2)}`,
            'success'
          );

          addLog('所有測試完成！', 'success');
        } catch (error) {
          addLog(`測試失敗: ${error.message}`, 'error');
          console.error('Test failed:', error);
        }
      }

      function clearLog() {
        log.innerHTML = '<div class="info">[系統] 日誌已清空</div>';
      }

      testBtn.addEventListener('click', testComponentLoad);
      clearBtn.addEventListener('click', clearLog);

      addLog('簡單測試頁面載入完成', 'success');
    </script>
  </body>
</html>
